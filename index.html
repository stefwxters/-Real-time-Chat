<!DOCTYPE html>
<html>
<head>
    <title>IPFS Example</title>
    <script src="https://unpkg.com/ipfs@0.66.0/dist/index.min.js"></script>
</head>
<body>
    <script>
        let myId;
        const topic = 'my-topic';

        function startPresence() {
            console.log('Starting presence with ID:', myId);
        }

        function handleMessage(msg) {
            console.log('Received message:', msg);
        }

        Ipfs.create().then(async ipfs => {
            const peerInfo = await ipfs.id();
            myId = peerInfo.id;
            console.log('My ID:', myId);
            startPresence();
            ipfs.pubsub.subscribe(topic, handleMessage);
        }).catch(err => {
            console.error('Failed to create IPFS node:', err);
        });
    </script>
</body>
</html>
